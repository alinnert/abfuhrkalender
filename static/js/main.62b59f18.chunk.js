(this.webpackJsonpabfuhrkalender=this.webpackJsonpabfuhrkalender||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c,r=n(2),a=n(0),i=n.n(a),s=n(13),l=n.n(s),u=n(6),j=(n(29),n(30),n(7)),d=n.n(j),o=n(9),b=n(21),h=n.n(b);!function(e){e[e.residual=0]="residual",e[e.plastic=1]="plastic",e[e.paper=2]="paper",e[e.bio=3]="bio",e[e.problem=4]="problem"}(c||(c={}));var f,O=Object(u.b)({key:"selectedLitterTypesState",default:[c.residual,c.plastic,c.paper,c.bio]}),p=Object(u.b)({key:"litterServiceFileState",default:null}),x=Object(u.c)({key:"litterServiceFileContentState",get:function(){var e=Object(o.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,null!==(c=n(p))){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,c.text();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),m=Object(u.c)({key:"litterServiceDataState",get:function(e){var t=(0,e.get)(x);if(null===t)return{};for(var n,r={},a=0,i=Object.values(h.a.parseICS(t));a<i.length;a++){var s=i[a];if(void 0!==s.start){var l=s.start.toDateString();if(Array.isArray(r[l])||(r[l]=[]),void 0!==s.summary){var u=(n=s.summary).startsWith("Restm\xfcll")?c.residual:n.startsWith("Gelber Sack")?c.plastic:n.startsWith("Papierabfuhr")?c.paper:n.startsWith("Biotonne")?c.bio:n.startsWith("Problemm\xfcll")?c.problem:null;null!==u&&r[l].push({date:s.start,type:u})}}}return r}}),g=(n(33),Object(a.memo)((function(e){var t=e.type,n=Object(a.useMemo)((function(){switch(t){case c.residual:return"black";case c.plastic:return"hsl(45, 80%, 50%)";case c.paper:return"hsl(200, 80%, 50%)";case c.bio:return"hsl(20, 60%, 40%)";case c.problem:return"hsl(0, 90%, 50%)"}}),[t]);return Object(r.jsx)("div",{className:"litter-icon",style:{color:n},children:Object(r.jsx)("svg",{style:{width:24,height:24},viewBox:"0 0 24 24",children:Object(r.jsx)("path",{fill:"currentColor",d:"M20.37,8.91L19.37,10.64L7.24,3.64L8.24,1.91L11.28,3.66L12.64,3.29L16.97,5.79L17.34,7.16L20.37,8.91M6,19V7H11.07L18,11V19A2,2 0 0,1 16,21H8A2,2 0 0,1 6,19Z"})})})})));function v(e){var t=e.date,n=e.isHoliday,c=e.litterTypes,i=Object(u.f)(O),s=Object(a.useMemo)((function(){return c.filter((function(e){return i.includes(e)})).map((function(e){return Object(r.jsx)(g,{type:e},e)}))}),[c,i]);return Object(r.jsxs)("div",{className:"day ".concat(0===t.getDay()?"day--is-sunday":""," ").concat(6===t.getDay()?"day--is-saturday":""," ").concat(n?"day--is-holiday":"").trim(),children:[Object(r.jsx)("div",{className:"day__number",children:t.getDate()}),Object(r.jsx)("div",{className:"day__weekday",children:t.toLocaleDateString("default",{weekday:"short"})}),Object(r.jsx)("div",{className:"day__litter-icons",children:s})]})}!function(e){e[e.first=0]="first",e[e.second=1]="second"}(f||(f={}));var k=(new Date).getFullYear(),y=Object(u.b)({key:"yearState",default:k}),_=Object(u.d)({key:"pageMonthsState",get:function(e){return function(){return e===f.first?[0,1,2,3,4,5]:[6,7,8,9,10,11]}}}),N=Object(u.d)({key:"pageDaysState",get:function(e){return function(t){var n=t.get;return n(_(e)).map((function(e){for(var t=[],c=new Date(n(y),e);c.getMonth()===e;)t.push(new Date(c)),c.setDate(c.getDate()+1);return{monthId:e,dates:t}}))}}}),S=n(3),w=new URL("https://feiertage-api.de/api/"),D=["Augsburger Friedensfest","Bu\xdf- und Bettag"],C=Object(u.c)({key:"holidaysState",get:function(){var e=Object(o.a)(d.a.mark((function e(t){var n,c,r,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,c=new URLSearchParams({jahr:String(n(y)),nur_land:"by"}),r="".concat(w,"?").concat(c.toString()),e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,e.abrupt("return",Object.entries(i).filter((function(e){var t=Object(S.a)(e,1)[0];return!D.includes(t)})).map((function(e){var t=Object(S.a)(e,2)[1];return new Date(t.datum)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),L=Object(u.c)({key:"holidaysStringState",get:function(e){return(0,e.get)(C).map((function(e){return e.toDateString()}))}}),F=Object(a.memo)((function(e){var t=e.page,n=Object(u.f)(y),c=Object(u.f)(L),i=Object(u.f)(N(t)),s=Object(u.f)(m);return Object(r.jsxs)("div",{className:"calendar",children:[Object(r.jsxs)("div",{className:"calendar__header",children:["Abfuhrkalender ",n]}),Object(r.jsx)("div",{className:"calendar__days",children:i.map((function(e,t){return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("div",{className:"calendar__month-name",style:{gridRow:String(2*t+1)},children:new Date(n,e.monthId).toLocaleString("default",{month:"long"})}),e.dates.map((function(e,n){var a,i;return Object(r.jsx)("div",{className:"calendar__day",style:{gridRow:String(2*t+2)},children:Object(r.jsx)(v,{date:e,isHoliday:c.includes(e.toDateString()),litterTypes:null!==(a=null===(i=s[e.toDateString()])||void 0===i?void 0:i.map((function(e){return e.type})))&&void 0!==a?a:[]})},n)}))]},t)}))})]})}));n(34);function A(){return Object(r.jsx)("div",{className:"calendar-fallback",children:Object(r.jsx)("div",{className:"calendar-fallback__indicator",children:"Kalender wird erstellt..."})})}var M,I=n(10),R=n(12),B=n(5),P=n(18);n(35);function T(e){var t=e.children,n=e.theme,c=Object(P.a)(e,["children","theme"]);return Object(r.jsx)("button",Object(B.a)(Object(B.a)({},c),{},{className:"button ".concat(n===M.dark?"button--dark":""," ").concat(c.className),children:t}))}!function(e){e[e.light=0]="light",e[e.dark=1]="dark"}(M||(M={}));n(36);function H(e){var t=e.children;return Object(r.jsx)("div",{className:"button-row",children:t})}n(37);function W(e){var t=e.label,n=e.name,c=e.checked,a=void 0!==c&&c,i=e.onChange;return Object(r.jsx)("div",{className:"checkbox",children:Object(r.jsxs)("label",{className:"checkbox__label",children:[Object(r.jsx)("input",{className:"checkbox__input",type:"checkbox",name:n,id:n,checked:a,onChange:function(){return null===i||void 0===i?void 0:i(!a)}}),Object(r.jsx)("span",{className:"checkbox__label-text",children:t})]})})}n(38);function G(e){var t=e.icon,n=e.label,c=e.onChange,i=Object(a.useRef)(null),s=Object(a.useState)(""),l=Object(S.a)(s,2),u=l[0],j=l[1];return Object(r.jsxs)("div",{className:"file-input",children:[Object(r.jsx)("input",{className:"file-input__input",type:"file",ref:i,onChange:function(){if(null!==i.current){c(i.current.files);var e=i.current.files;j(null===e?"":Object(I.a)(e).map((function(e){return e.name})).join(", "))}}}),Object(r.jsxs)(T,{className:"file-input__button",onClick:function(){null!==i.current&&i.current.click()},children:[Object(r.jsx)("span",{className:"file-input__button-icon",children:t}),Object(r.jsx)("span",{className:"file-input__button-label",children:n})]}),""!==u?Object(r.jsxs)("div",{className:"file-input__filename",children:[Object(r.jsx)("strong",{children:"Ausgew\xe4hlte Datei:"}),Object(r.jsx)("br",{}),u]}):null]})}n(39),n(40);function J(e){var t=e.children,n=e.title;return Object(r.jsxs)("div",{className:"settings-group",children:[Object(r.jsx)("div",{className:"settings-group__title",children:n}),Object(r.jsx)("div",{className:"settings-group__content",children:t})]})}var z=function(){var e=Object(u.e)(y),t=Object(S.a)(e,2),n=t[0],i=t[1],s=Object(u.g)(y),l=Object(u.h)(p),j=Object(u.e)(O),d=Object(S.a)(j,2),o=d[0],b=d[1],h=Object(a.useMemo)((function(){return(new Date).getFullYear()}),[]);function f(e){o.includes(e)?b(o.filter((function(t){return t!==e}))):b([].concat(Object(I.a)(o),[e]))}return Object(r.jsxs)("div",{className:"settings",children:[Object(r.jsx)(J,{title:"Jahr: ".concat(n),children:Object(r.jsxs)(H,{children:[Object(r.jsx)(T,{onClick:function(){return i(n-1)},children:Object(r.jsx)(R.a,{})}),Object(r.jsx)(T,{onClick:function(){return i(n+1)},children:Object(r.jsx)(R.b,{})}),Object(r.jsx)(T,{disabled:n===h,onClick:s,children:"Aktuelles Jahr"})]})}),Object(r.jsxs)(J,{title:"Abfuhr-Daten",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Abfuhr-Daten holen:"}),Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://www.landkreis-kelheim.de/amt-service/onlineservices/abfallkalender/",children:"Abfallkalender Landkreis Kelheim"})]}),Object(r.jsx)("p",{children:"Aktuell werden nur iCal-Dateien (*.ics) unterst\xfctzt."}),Object(r.jsx)(G,{icon:Object(r.jsx)(R.c,{}),label:"Datei ausw\xe4hlen...",onChange:function(e){if(null!==e&&0!==e.length){var t=e.item(0);null!==t&&l(t)}}})]}),Object(r.jsxs)(J,{title:"M\xfclltypen ausw\xe4hlen",children:[Object(r.jsx)(W,{label:"Restm\xfcll",name:"resudial",checked:o.includes(c.residual),onChange:function(){return f(c.residual)}}),Object(r.jsx)(W,{label:"Gelber Sack",name:"plastic",checked:o.includes(c.plastic),onChange:function(){return f(c.plastic)}}),Object(r.jsx)(W,{label:"Papier",name:"paper",checked:o.includes(c.paper),onChange:function(){return f(c.paper)}}),Object(r.jsx)(W,{label:"Bio",name:"bio",checked:o.includes(c.bio),onChange:function(){return f(c.bio)}}),Object(r.jsx)(W,{label:"Problemm\xfcll",name:"problem",checked:o.includes(c.problem),onChange:function(){return f(c.problem)}})]}),Object(r.jsxs)(J,{title:"Fertig?",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)(R.d,{})," ",Object(r.jsx)("strong",{children:"Tipp"}),Object(r.jsx)("br",{}),"Im Drucken-Dialog:"]}),Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("em",{children:"Hintergrundgrafiken"})," ",Object(r.jsx)("strong",{children:"aktivieren"})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("em",{children:"Kopf- und Fu\xdfzeilen"})," ",Object(r.jsx)("strong",{children:"deaktivieren"})]})]}),Object(r.jsx)(T,{onClick:globalThis.print,children:"Drucken..."})]}),Object(r.jsx)(J,{title:"\xdcber",children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["Source Code: ",Object(r.jsx)("a",{href:"https://github.com/alinnert/abfuhrkalender",children:"GitHub"})]}),Object(r.jsxs)("li",{children:["Icons: ",Object(r.jsx)("a",{href:"https://icons.modulz.app/",children:"Radix Icons"})]}),Object(r.jsxs)("li",{children:["Feiertagsdaten: ",Object(r.jsx)("a",{href:"https://feiertage-api.de",children:"feiertage-api.de"})]})]})})]})};var K=function(){return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsxs)("div",{className:"app__sidebar",children:[Object(r.jsx)("div",{className:"app__title",children:"Generator f\xfcr M\xfcllabfuhrkalender"}),Object(r.jsx)("div",{className:"app__settings",children:Object(r.jsx)(z,{})})]}),Object(r.jsx)("div",{className:"app__calendar",children:Object(r.jsxs)(a.Suspense,{fallback:Object(r.jsx)(A,{}),children:[Object(r.jsx)(F,{page:f.first}),Object(r.jsx)(F,{page:f.second})]})})]})},U=(n(41),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))});l.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(u.a,{children:Object(r.jsx)(K,{})})}),document.getElementById("root")),U(console.log)}},[[42,1,2]]]);
//# sourceMappingURL=main.62b59f18.chunk.js.map